<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Fermah Quiz</title>
<style>
  :root{--bg:#0b1b22;--panel:#0e252e;--ink:#e8f6f2;--muted:#9fc6bb;--accent:#17c8a5;--good:#1fd38f;--bad:#ff6b6b}
  html,body{height:100%;margin:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif}
  .wrap{max-width:880px;margin:auto;padding:16px 14px 80px}
  header{display:flex;align-items:center;gap:12px;margin:8px 0 18px}
  .title{font-weight:800;font-size:26px}
  .tag{color:var(--muted);font-size:13px}
  .spacer{flex:1}
  .logo{width:60px;height:60px;border-radius:10px;overflow:hidden}
  .logo img{width:100%;height:100%;object-fit:cover}
  .card{background:linear-gradient(180deg,#0e262f,#0e2127);border:1px solid #13333d;border-radius:14px;padding:16px;box-shadow:0 10px 24px rgba(0,0,0,.25)}
  .grid{display:grid;gap:12px}
  .two{grid-template-columns:1fr 1fr}
  .btn{background:var(--accent);border:none;color:#062027;font-weight:800;padding:12px 14px;border-radius:12px;cursor:pointer}
  .btn.alt{background:#153943;color:#cdeee7;border:1px solid #24535f}
  input[type="text"],input[type="file"],input[type="password"]{background:#0a1d24;border:1px solid #173842;color:var(--ink);padding:11px 12px;border-radius:10px;outline:none}
  /* nicer ‚ÄúChoose image‚Äù button (Chrome/Edge/Brave) */
  input[type="file"]::file-selector-button{content:"Choose image";background:var(--accent);color:#062027;font-weight:700;border:none;border-radius:8px;padding:6px 10px;margin-right:8px;cursor:pointer}
  .pfp{width:84px;height:84px;border-radius:16px;object-fit:cover;border:1px solid #23444f;background:#0b1e25}
  .qtxt{font-size:20px;font-weight:700;margin:0 0 10px}
  .options{display:grid;gap:10px}
  .option{background:#0a1e25;border:1px solid #183a45;border-radius:12px;padding:12px;cursor:pointer;color:var(--ink)}
  .option:hover{border-color:#2a5d6b}
  .option.correct{border-color:var(--good);box-shadow:0 0 0 2px rgba(31,211,143,.15)}
  .option.wrong{border-color:var(--bad);box-shadow:0 0 0 2px rgba(255,107,107,.12)}
  .hud{display:flex;gap:10px;flex-wrap:wrap;margin:10px 0 14px}
  .chip{background:#0a1d23;border:1px solid #173741;color:#bfeee4;padding:6px 10px;border-radius:999px;font-size:13px}
  footer{position:fixed;left:0;right:0;bottom:0;padding:10px 14px;text-align:center;color:#96cfc3;background:linear-gradient(180deg,transparent,rgba(0,0,0,.35))}
  footer b{color:#d8fff7}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div class="logo"><img src="fermah-logo.png" alt="Fermah Logo"></div>
    <div>
      <div class="title">Fermah Quiz</div>
      <div class="tag">Test your ZK & Fermah IQ üß†</div>
    </div>
    <div class="spacer"></div>
  </header>

  <!-- LOGIN -->
  <section id="login" class="card grid">
    <div class="grid two">
      <div class="field">
        <label>Create account</label>
        <input id="name" type="text" placeholder="Username" />
        <input id="pfp" type="file" accept="image/png,image/jpeg" />
        <input id="passCreate" type="password" placeholder="Password (min 6 chars)" />
        <button class="btn" id="createBtn">Create & Continue</button>
      </div>
      <div class="field">
        <label>Or log in</label>
        <select id="loginSelect"></select>
        <input id="passLogin" type="password" placeholder="Password" />
        <button class="btn alt" id="loginBtn">Login</button>
      </div>
    </div>
  </section>

  <!-- QUIZ -->
  <section id="quiz" class="card" style="display:none">
    <div class="hud">
      <span class="chip" id="hudUser"></span>
      <span class="chip">Q <b id="hudIdx">1</b>/<b id="hudTotal">10</b></span>
      <span class="chip">‚úÖ <b id="hudScore">0</b></span>
      <span class="chip">‚è±Ô∏è <b id="hudTime">0s</b></span>
    </div>
    <p class="qtxt" id="question"></p>
    <div class="options" id="options"></div>
  </section>

  <!-- RESULT -->
  <section id="result" class="card" style="display:none">
    <div class="grid two">
      <div class="center">
        <img id="resPfp" class="pfp" alt="">
        <div style="font-weight:800;margin-top:8px" id="resName"></div>
      </div>
      <div>
        <div class="qtxt">Your Proof-IQ</div>
        <div id="resIQ" style="font-size:40px;font-weight:900;color:var(--accent)"></div>
        <div id="resSummary"></div>
      </div>
    </div>
    <div class="grid two" style="margin-top:12px">
      <button class="btn" id="playAgain">Play Again</button>
    </div>
  </section>
</div>

<footer>Made by <b>FreeGuyx247</b> ‚Ä¢ Community fan project</footer>

<script>
let currentUser=null, quizSize=10, timerId=null, questions=[], idx=0, score=0, startTs=0;

/* -------- Profiles (local-only) -------- */
function loadProfiles(){ try{return JSON.parse(localStorage.getItem('fermah_profiles')||'[]')}catch{return[]} }
function saveProfiles(arr){ localStorage.setItem('fermah_profiles', JSON.stringify(arr)) }
function refreshLoginSelect(){
  const sel=document.getElementById('loginSelect'); sel.innerHTML='';
  loadProfiles().forEach((p,i)=>{ const o=document.createElement('option'); o.value=i; o.textContent=p.name; sel.appendChild(o); });
}
async function fileToDataURL(f){ return new Promise((res,rej)=>{ const r=new FileReader(); r.onload=()=>res(r.result); r.onerror=rej; r.readAsDataURL(f); }) }

/* -------- Create -------- */
document.getElementById('createBtn').onclick=async ()=>{
  const name=document.getElementById('name').value.trim();
  if(!name) return alert("Enter name");
  const pass=document.getElementById('passCreate').value;
  if(!pass||pass.length<6) return alert("Password min 6 chars");
  const pfpFile=document.getElementById('pfp').files[0];
  const pfp=pfpFile?await fileToDataURL(pfpFile):'';
  const list=loadProfiles();
  if(list.some(p=>p.name.toLowerCase()===name.toLowerCase())) return alert("Name already exists. Use Login.");
  list.push({name,pass,pfp});
  saveProfiles(list); refreshLoginSelect(); alert("Account created! Please login.");
};

/* -------- Login -------- */
document.getElementById('loginBtn').onclick=()=>{
  const list=loadProfiles(); const i=document.getElementById('loginSelect').value|0; const user=list[i];
  if(!user) return alert('Select a profile');
  if(user.pass!==document.getElementById('passLogin').value) return alert("Wrong password");
  currentUser=user; startQuiz(); // (keeps the same flow you had)
};

/* -------- 100-Question Bank -------- */
const BANK = [
 {q:"What is Fermah?", a:["A universal market for zero-knowledge proofs","A DEX","A wallet","A bridge"], i:0},
 {q:"Who submits proof jobs to Fermah?", a:["Seekers","Miners","Relayers","Indexers"], i:0},
 {q:"Who generates proofs in Fermah?", a:["Prover Nodes","Sequencers","Auditors","RPC nodes"], i:0},
 {q:"Who checks proofs?", a:["Verifiers","Provers","Bridges","Wallets"], i:0},
 {q:"Fermah‚Äôs goal is to make proofs‚Ä¶", a:["Cheap, fast, and reliable","Exclusive and expensive","Private to one vendor","Tied to one chain"], i:0},
 {q:"‚ÄòCredibly neutral‚Äô in Fermah means‚Ä¶", a:["No vendor/chain bias","Prefer a single SNARK","Prefer L2s only","Favor one zkVM"], i:0},
 {q:"Universal proving means Fermah can handle‚Ä¶", a:["Multiple proof systems, chains, and VMs","Only STARKs","Only Groth16","Only Ethereum"], i:0},
 {q:"The Matchmaker in Fermah mainly‚Ä¶", a:["Assigns jobs to the right Prover","Sets gas price","Bridges assets","Runs governance"], i:0},
 {q:"Key reason markets lower proof cost?", a:["Higher utilization of hardware","Higher gas fees","More wallets","Bigger blocks"], i:0},
 {q:"Restaking context for Fermah aligns with‚Ä¶", a:["EigenLayer","IBC","PoW pools","Beacon chain"], i:0},

 {q:"What is a zkVM?", a:["A VM whose execution can be proven","A video machine","An exchange VM","A storage VM"], i:0},
 {q:"What is a witness in ZK?", a:["Secret inputs to the circuit","Public inputs","Gas price","Signature"], i:0},
 {q:"Public inputs are‚Ä¶", a:["Known to the verifier","Kept secret","Stored as witness only","Encrypted"], i:0},
 {q:"Zero-knowledge means a proof reveals‚Ä¶", a:["Nothing beyond validity","All inputs","Private keys","Circuit code"], i:0},
 {q:"Soundness roughly means‚Ä¶", a:["False statements can‚Äôt be proved (except negligible)","Proofs are short","Setup is universal","Keys are reusable"], i:0},
 {q:"Completeness means‚Ä¶", a:["True statements have proofs","Proofs have pairings","Setup is trusted","Witness is hidden"], i:0},
 {q:"Fiat‚ÄìShamir transforms‚Ä¶", a:["Interactive protocols ‚Üí non-interactive","Hashes ‚Üí commitments","R1CS ‚Üí AIR","PLONK ‚Üí STARK"], i:0},
 {q:"A trusted setup is used to create‚Ä¶", a:["Proving/verification keys","Wallets","Smart contracts","Relayers"], i:0},
 {q:"‚ÄòPowers of Tau‚Äô is a‚Ä¶", a:["Common setup ceremony","Hash function","Curve","AIR schema"], i:0},
 {q:"Universal setup is‚Ä¶", a:["Reusable across circuits","Per-circuit only","For hashing only","Only for STARKs"], i:0},

 {q:"R1CS describes‚Ä¶", a:["Constraints for SNARKs","Account trees","Gas rules","Rollup batches"], i:0},
 {q:"AIR is used by‚Ä¶", a:["STARKs","Groth16","KZG","ECDSA"], i:0},
 {q:"FRI is a protocol used in‚Ä¶", a:["STARKs","PLONK","Groth16","IPA"], i:0},
 {q:"KZG commitments are used by‚Ä¶", a:["PLONK-style SNARKs","FRI STARKs","ECDSA","RSA"], i:0},
 {q:"Groth16 is known for‚Ä¶", a:["Very short proofs","No setup","Huge proofs","No pairings"], i:0},
 {q:"BLS12-381 is a‚Ä¶", a:["Pairing-friendly curve","Hash","Hash-to-curve only","Rollup"], i:0},
 {q:"BN254 is commonly used in‚Ä¶", a:["Ethereum SNARKs","Bitcoin POW","FRI only","ECDSA only"], i:0},
 {q:"Poseidon is a‚Ä¶", a:["ZK-friendly hash","Pairing","Curve","Signature"], i:0},
 {q:"Merkle trees provide‚Ä¶", a:["Commitment & membership proofs","Consensus","Randomness","Bridging"], i:0},
 {q:"Polynomial commitment lets you prove‚Ä¶", a:["Eval of a polynomial at a point","Block size","Gas paid","Nonce value"], i:0},

 {q:"Recursion in ZK allows‚Ä¶", a:["Proofs inside proofs (aggregation)","No hashing","No circuits","Gasless chains"], i:0},
 {q:"Aggregation reduces‚Ä¶", a:["Verifier work/size","Prover time","Circuit size always","Keys"], i:0},
 {q:"Why scheduling matters for a proof market?", a:["Match capability‚Üíjob for low latency","Hide proofs","Raise gas","Throttle users"], i:0},
 {q:"Which resource dominates proving?", a:["Compute (GPU/CPU/ASIC)","Disk only","Network only","RPC calls"], i:0},
 {q:"A verifier on L1 should be‚Ä¶", a:["Cheap and deterministic","GPU heavy","Randomized","Non-deterministic"], i:0},
 {q:"Batching proofs helps‚Ä¶", a:["Amortize costs","Leak secrets","Create inflation","Break soundness"], i:0},
 {q:"Validity rollups rely on‚Ä¶", a:["ZK proofs of state transitions","Honest sequencers only","Optimistic disputes","Bridges"], i:0},
 {q:"Optimistic rollups rely on‚Ä¶", a:["Fraud proofs & delay","Pairings","Trusted setup","FRI only"], i:0},
 {q:"Circuit size affects‚Ä¶", a:["Prover time & memory","Wallet UI","Gas price only","EVM opcodes"], i:0},
 {q:"Proof size mainly affects‚Ä¶", a:["Verification cost & bandwidth","Prover RAM only","Witness secrecy","Curve choice only"], i:0},

 {q:"PLONK is a‚Ä¶", a:["Universal SNARK scheme","STARK hash","zkVM","AIR system"], i:0},
 {q:"IPA commitments are used in‚Ä¶", a:["Some SNARKs without pairings","Merkle proof","ECDSA","FRI only"], i:0},
 {q:"Trusted setup risk is mitigated by‚Ä¶", a:["Multi-party ceremonies","Single operator","Central server","No hashing"], i:0},
 {q:"Circuit arity refers to‚Ä¶", a:["Gate/input structure","Chain count","Gas bracket","User count"], i:0},
 {q:"Lookup arguments speed‚Ä¶", a:["Certain SNARK operations","P2P gossip","Bridges","Signature size"], i:0},
 {q:"Range proofs prove‚Ä¶", a:["Value within bounds","Ownership","Gas usage","Miners"], i:0},
 {q:"A nullifier prevents‚Ä¶", a:["Double-spend / replay","Pairings","Hashing","ECDSA"], i:0},
 {q:"Semaphore shows‚Ä¶", a:["Membership without identity leak","Gas paid","Chain ID","L1 block"], i:0},
 {q:"Universal market helps avoid‚Ä¶", a:["Vendor lock-in","Higher TPS","Lower security","Public inputs"], i:0},
 {q:"Time-to-proof improves with‚Ä¶", a:["Right hardware & scheduling","Bigger blocks","Extra RPCs","Longer keys"], i:0},

 {q:"Verification key (VK) is used by‚Ä¶", a:["Verifier","Prover","Sequencer","Wallet UI"], i:0},
 {q:"Proving key (PK) is used by‚Ä¶", a:["Prover","Verifier","Relayer","Bridge"], i:0},
 {q:"Witness is kept‚Ä¶", a:["Secret","On-chain","In calldata","In account tree"], i:0},
 {q:"Public inputs are usually‚Ä¶", a:["Committed or passed to verifier","Never used","Encrypted only","Random"], i:0},
 {q:"ZK proof should convince verifier‚Ä¶", a:["Statement true w/o revealing witness","Wallet is rich","Gas is cheap","Curve is safe"], i:0},
 {q:"Memory-hard steps mostly affect‚Ä¶", a:["Prover","Verifier","Wallet","RPC"], i:0},
 {q:"STARKs avoid trusted setup using‚Ä¶", a:["FRI+hash commitments","KZG only","Pairings","Multi-sigs"], i:0},
 {q:"SNARK often relies on‚Ä¶", a:["Pairings or commitments","FRI only","Bridges","L1 consensus"], i:0},
 {q:"Circuit compilation targets often include‚Ä¶", a:["R1CS/PLONKish/AIR","SQL","PNG","WASM UI only"], i:0},
 {q:"zkEVM proves‚Ä¶", a:["EVM execution correctness","Wallet balance","Gas burn","Bridged tokens"], i:0},

 {q:"Gas for on-chain verification should be‚Ä¶", a:["Minimized","Maximized","Irrelevant","Unlimited"], i:0},
 {q:"Hardware acceleration for proving includes‚Ä¶", a:["GPU/FPGA/ASIC","Only CPU","Only HDD","Only NIC"], i:0},
 {q:"Proof markets help Seekers by‚Ä¶", a:["Price discovery & reliability","Hiding costs","Fixing TPS","Direct L1 MEV"], i:0},
 {q:"Proof markets help Provers by‚Ä¶", a:["Steady demand/utilization","Censoring","KYC wallets","Burning keys"], i:0},
 {q:"A circuit bug can break‚Ä¶", a:["Soundness","Completeness","Hashing only","Calldata size"], i:0},
 {q:"Poseidon is preferred because‚Ä¶", a:["ZK-friendly arithmetics","Short public keys","Cheap opcodes","No field ops"], i:0},
 {q:"Pairings are operations on‚Ä¶", a:["Elliptic-curve groups","Merkle trees","RPC","Sequencers"], i:0},
 {q:"ZK-friendly curves include‚Ä¶", a:["BLS12-381 / BN254","secp256k1 only","ed25519 only","P-256 only"], i:0},
 {q:"A verifier contract typically checks‚Ä¶", a:["Proof, public inputs, VK","Wallet seed","Gas token","Chain ID"], i:0},
 {q:"Recursion allows weekly checkpoints by‚Ä¶", a:["Rolling many proofs into one","Publishing raw logs","Using faucets","Printing receipts"], i:0},

 {q:"In Fermah, reliability of Provers is backed by‚Ä¶", a:["Restaked collateral / reputation","Captcha levels","Follower count","EVM chain ID"], i:0},
 {q:"Latency sensitivity matters most for‚Ä¶", a:["Time-critical proof jobs","Cold storage","Docs","Images"], i:0},
 {q:"Throughput is increased by‚Ä¶", a:["Parallel proving & batching","Bigger blocks","Extra RPCs","More signatures"], i:0},
 {q:"Job capability matching considers‚Ä¶", a:["System, memory, perf & price","Profile picture","Twitter handle","L1 slot"], i:0},
 {q:"Seeker transparency helps‚Ä¶", a:["Forecasting costs","Front running","Censorship","Spam"], i:0},
 {q:"A proof of solvency proves‚Ä¶", a:["Liabilities ‚â§ assets without leaking balances","TPS","Bridge fees","Seed phrases"], i:0},
 {q:"Circuit ‚Äògadgets‚Äô are‚Ä¶", a:["Reusable sub-circuits","Android widgets","Wallet plugins","L1 precompiles"], i:0},
 {q:"IPA proofs avoid pairings but‚Ä¶", a:["Use inner-product checks","Use FRI","Need RSA","Use Merkle Patricia"], i:0},
 {q:"KZG requires a setup whereas FRI‚Ä¶", a:["Does not","Also needs trusted SRS","Needs pairings","Needs RSA SRS"], i:0},
 {q:"Rollups post data to L1 for‚Ä¶", a:["Data availability","Extra gas","MEV","Bridging"], i:0},

 {q:"Circuit arithmetization maps logic to‚Ä¶", a:["Field equations/constraints","Calldata ABI","EVM opcodes","Solidity"], i:0},
 {q:"Constraint system proves the relation between‚Ä¶", a:["Inputs & program","Wallet & gas","Chain & slot","Bridge & L2"], i:0},
 {q:"Witness generation happens during‚Ä¶", a:["Proving","Verification","Compilation","Deployment"], i:0},
 {q:"Verification is typically‚Ä¶", a:["Fast","Slower than proving","Interactive","GPU only"], i:0},
 {q:"Proof compression by recursion reduces‚Ä¶", a:["Chain verify cost","Prover memory","Circuit size","Setup size"], i:0},
 {q:"A universal market like Fermah reduces‚Ä¶", a:["Vendor lock-in risk","Hash collisions","Key size","Merkle depth"], i:0},
 {q:"Availability of multiple systems lets Seekers‚Ä¶", a:["Choose cost/latency tradeoffs","Pick 1 forced vendor","Avoid neutrality","Fix gas"], i:0},
 {q:"Key inputs for pricing include‚Ä¶", a:["Hardware time & energy","User age","Chat count","Block size only"], i:0},
 {q:"Good orchestration lowers‚Ä¶", a:["Tail latency","Bandwidth","Tx count","Nonce"], i:0},
 {q:"Proof artifacts are typically shipped as‚Ä¶", a:["Docker images/containers","PDFs","PNGs","ZIP emails only"], i:0},

 {q:"SNARK stands for‚Ä¶", a:["Succinct Non-interactive ARgument of Knowledge","Simple Non-auth Root Key","Secure Non-array Kernel","Signed Non-AES Routine"], i:0},
 {q:"STARK stands for‚Ä¶", a:["Scalable Transparent ARgument of Knowledge","Simple Transfer ACK","Secure Token ARK","State Tree ACK"], i:0},
 {q:"Why ‚Äòtransparent‚Äô in STARKs?", a:["No trusted setup","Only one key","All public inputs","Pairings used"], i:0},
 {q:"Groth16 verification uses‚Ä¶", a:["Pairings","FRI","RSA","BLS signatures"], i:0},
 {q:"PLONKish systems often use‚Ä¶", a:["KZG commitments","FRI only","RSA only","Lamport"], i:0},
 {q:"Time bonus in your IQ score rewards‚Ä¶", a:["Faster correct answers","Wrong answers","More gas","More wallets"], i:0},
 {q:"In Fermah UI, a Seeker‚Äôs request becomes‚Ä¶", a:["A job in the market","A block","A bridge","A faucet"], i:0},
 {q:"Provers advertise‚Ä¶", a:["Capabilities/price/latency","Twitter handle","NFTs","Seed"], i:0},
 {q:"Verifiers should be‚Ä¶", a:["Deterministic & cheap","Random","Off-chain only","GPU-heavy"], i:0},
 {q:"Main risk without market transparency?", a:["Unclear/volatile pricing","Too many proofs","Perfect fairness","No hashing"], i:0}
];

/* -------- Quiz engine -------- */
function pickRandom(n, arr=BANK){ const a=[...arr]; a.sort(()=>Math.random()-0.5); return a.slice(0,n); }
function startQuiz(){
  document.getElementById('login').style.display='none';
  document.getElementById('quiz').style.display='block';
  document.getElementById('result').style.display='none';
  document.getElementById('hudUser').textContent=`üë§ ${currentUser.name}`;
  document.getElementById('hudScore').textContent=0;
  document.getElementById('hudTotal').textContent=quizSize;
  document.getElementById('hudTime').textContent='0s';

  questions = pickRandom(quizSize).map(q=>{
    const opts=[...q.a].map((t,i)=>({t,i}));
    opts.sort(()=>Math.random()-0.5);
    return {q:q.q, opts, correct:opts.findIndex(o=>o.i===q.i)};
  });
  idx=0; score=0; startTs=Date.now();
  if(timerId) clearInterval(timerId);
  timerId=setInterval(()=>document.getElementById('hudTime').textContent=Math.floor((Date.now()-startTs)/1000)+'s',500);
  showQuestion();
}
function showQuestion(){
  if(idx>=questions.length){ endQuiz(); return; }
  document.getElementById('hudIdx').textContent=idx+1;
  const it=questions[idx];
  document.getElementById('question').textContent=it.q;
  const box=document.getElementById('options'); box.innerHTML='';
  it.opts.forEach((o,i)=>{
    const b=document.createElement('button');
    b.className='option'; b.textContent=o.t;
    b.onclick=()=>selectAnswer(i,b,it);
    box.appendChild(b);
  });
}
function selectAnswer(i,btn,it){
  [...document.querySelectorAll('.option')].forEach(x=>x.disabled=true);
  if(i===it.correct){ score++; btn.classList.add('correct'); }
  else { btn.classList.add('wrong'); }
  document.getElementById('hudScore').textContent=score;
  setTimeout(()=>{ idx++; showQuestion(); },600);
}
function endQuiz(){
  clearInterval(timerId);
  const total=questions.length, secs=Math.floor((Date.now()-startTs)/1000)||1, acc=score/total;
  const iq=Math.round(60+40*acc+Math.min(20,200/secs));
  document.getElementById('quiz').style.display='none';
  document.getElementById('result').style.display='block';
  document.getElementById('resName').textContent=currentUser.name;
  document.getElementById('resPfp').src=currentUser.pfp||'';
  document.getElementById('resIQ').textContent=iq;
  document.getElementById('resSummary').textContent=`Score: ${score}/${total} ‚Ä¢ Accuracy ${(acc*100).toFixed(0)}% ‚Ä¢ Time ${secs}s`;
}
document.getElementById('playAgain').onclick=()=>{ startQuiz(); };

refreshLoginSelect();
</script>
</body>
</html>
